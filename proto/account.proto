syntax = "proto3";

package account.v1;

import "google/protobuf/empty.proto";

service AccountService {
  rpc GetAccount (GetAccountRequest) returns (GetAccountResponse);

  rpc InitEmailChange (InitEmailChangeRequest) returns (google.protobuf.Empty);
  rpc ConfirmEmailChange (ConfirmEmailChangeRequest) returns (google.protobuf.Empty);

  rpc InitPhoneChange (InitPhoneChangeRequest) returns (google.protobuf.Empty);
  rpc ConfirmPhoneChange (ConfirmPhoneChangeRequest) returns (google.protobuf.Empty);
}

message GetAccountRequest {
  string id = 1;
}

message GetAccountResponse {
  string          id                = 1;
  optional string phone             = 2;
  optional string email             = 3;
  bool            is_phone_verfiied = 4;
  bool            is_email_verified = 5;
  Role            role              = 6;
}

enum Role {
  USER  = 0;
  ADMIN = 1;
}

message InitEmailChangeRequest {
  string email   = 1;
  string user_id = 2;
}

message ConfirmEmailChangeRequest {
  string email   = 1;
  string code    = 2;
  string user_id = 3;
}

message InitPhoneChangeRequest {
  string phone   = 1;
  string user_id = 2;
}

message ConfirmPhoneChangeRequest {
  string phone   = 1;
  string code    = 2;
  string user_id = 3;
}